---
title: "OTU analysis Cleaned"
author: "Alejandra"
date: "March 26, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}

library(dplyr)
nAxial_Biotrap_OTU_data = read.csv("../Data/Organized-Data/Axial-Biotrap-OTU-data.csv")

Axial_dataframe = data.frame(Axial_Biotrap_OTU_data)
Axial_dataframe2 <- select(Axial_dataframe, -1)

Axial_OTU_counts = Axial_dataframe [c(5:16)]
Axial_OTU_counts

Loihi_Biotrap_OTU_data = read.csv("../Data/Organized-Data/Loihi-Biotrap-OTU-data.csv")

Loihi_OTU_counts = Axial_dataframe [c(5:16)]
Loihi_OTU_counts

Characteristics = read.csv("../Data/Organized-Data/BioTrapCharacteristics.csv")
Characteristics
library(vegan)
library(nlme)

Axial_character = subset(Characteristics, Characteristics$seamount == 'Axial')
Loihi_character = subset(Characteristics,Characteristics$seamount == 'Loihi' )

#plot(Axial_Biotrap_OTU_data)
library(vegan)
Axial_mds = metaMDS(Axial_OTU_counts[rowSums(Axial_OTU_counts) > 0, ])#need to filter out all those 0s...
plot(Axial_mds)

sapply(Axial_OTU_counts,function(x){})

good_samples <- rownames(Axial_OTU_counts[(rowSums(decostand(Axial_OTU_counts,"pa")) >= 1)]) 
otus = Axial_OTU_counts[,good_samples]

#genefilter_sample(Axial_OTU_counts, filterfun_sample(function(x) x > 5), A=0.5*nsamples(Axial_OTU_counts))
```

Splitting Taxonomy
```{r}
library(splitstackshape)
AxialTaxSplit=cSplit(Axial_Biotrap_OTU_data, "Taxonomy", ";")

names(AxialTaxSplit)[16]="Kingdom"

names(AxialTaxSplit)[17]="Phylum"

names(AxialTaxSplit)[18]="Class"

names(AxialTaxSplit)[19]="order"

View(AxialTaxSplit)

AxialTaxSplit=cSplit(AxialTrapsOTUabs, "Taxonomy",";")

names(AxialTaxSplit)[15]="Kingdom"

names(AxialTaxSplit)[16]="Phylum"

names(AxialTaxSplit)[17]="Class"

names(AxialTaxSplit)[18]="order"

```

